<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Dashboard — Inventario Invernadero</title>
  <link rel="stylesheet" href="css/styles.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <div class="topbar">
    <div class="container">
      <div class="row">
        <div class="logo">
<svg class="icon" viewBox="0 0 24 24" fill="none">
  <defs>
    <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0" stop-color="#22c55e"/>
      <stop offset="1" stop-color="#06b6d4"/>
    </linearGradient>
  </defs>
  <path d="M3 21h18M5 21V8l4-2 4 2v13M13 21V11h4v10" stroke="url(#g1)" stroke-width="2" />
</svg> <span>Inventario Invernadero</span> <span class="badge">Liceo San Nicolás</span></div>
        <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
          <div id="autoSwitch" class="switch"><div class="track"></div><div class="dot"></div><span id="autoLabel">Auto: OFF</span></div>
          <button id="btnImport" class="btn">
<svg class="icon" viewBox="0 0 24 24" fill="none">
  <defs><linearGradient id="g4" x1="0" y1="0" x2="1" y2="1">
    <stop offset="0" stop-color="#60a5fa"/><stop offset="1" stop-color="#a78bfa"/></linearGradient></defs>
  <path d="M12 16V4m0 0l-4 4m4-4l4 4M4 20h16" stroke="url(#g4)" stroke-width="2"/></svg>Importar CSV</button>
          <button id="btnExport" class="btn btn-accent">
<svg class="icon" viewBox="0 0 24 24" fill="none">
  <defs><linearGradient id="g2" x1="0" y1="0" x2="1" y2="1">
    <stop offset="0" stop-color="#f59e0b"/><stop offset="1" stop-color="#ef4444"/></linearGradient></defs>
  <path d="M3 7l9 4 9-4M3 7v10l9 4 9-4V7" stroke="url(#g2)" stroke-width="2"/>
</svg>Exportar CSV</button>
          <button id="btnAdd" class="btn btn-ok">
<svg class="icon" viewBox="0 0 24 24" fill="none">
<defs><linearGradient id="g3" x1="0" y1="0" x2="1" y2="1">
<stop offset="0" stop-color="#84cc16"/><stop offset="1" stop-color="#22c55e"/></linearGradient></defs>
<circle cx="12" cy="12" r="9" stroke="url(#g3)" stroke-width="2"/><path d="M8 10c0-1.5 1.5-2.5 4-2.5s4 1 4 2.5-1.5 2.5-4 2.5-4 1-4 2.5 1.5 2.5 4 2.5 4-1 4-2.5" stroke="url(#g3)" stroke-width="2"/></svg>Añadir ítem</button>
          <input id="fileInput" type="file" accept=".csv" class="hidden"/>
        <button id="btnBulk" class="btn btn-warn">Carga rápida</button>
          <button id="btnEntrega" class="btn btn-warn">Asignar / Entrega</button>
          </div>
      </div>
    </div>
  </div>

  <main class="container">
    <section class="kpis">
      <div class="card"><h3>Total ítems</h3><div class="value" id="k_total">0</div></div>
      <div class="card"><h3>Unidades</h3><div class="value" id="k_units">0</div></div>
      <div class="card"><h3>Categorías</h3><div class="value" id="k_cats">0</div></div>
      <div class="card"><h3>Valor inventario (CLP)</h3><div class="value" id="k_value">$0</div></div>
    </section>

    <section class="controls">
      <input id="q" placeholder="Buscar por nombre, código o proveedor…" />
      <select id="f_categoria"><option value="">Todas las categorías</option></select>
      <select id="f_estado">
        <option value="">Todos los estados</option>
        <option value="OK">OK</option>
        <option value="BAJO">Stock bajo</option>
        <option value="AGOTADO">Agotado</option>
      </select>
      <select id="f_ubicacion"><option value="">Todas las ubicaciones</option></select>
    </section>

    <section class="table-wrap">
      <table id="tabla">
        <thead>
          <tr>
            <th>Seleccionar</th>
            <th>Código</th>
            <th>Nombre</th>
            <th>Categoría</th>
            <th>Unidad</th>
            <th>Cantidad</th>
            <th>Ubicación</th>
            <th>Proveedor</th>
            <th>Valor Unitario</th>
            <th>Valor Total</th>
            <th>Estado</th>
            <th>F. Ingreso</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <section class="charts" style="margin-top:24px">
  <h2>Gráficos de Inventario</h2>
  <canvas id="chartCategorias" height="120"></canvas>
  <canvas id="chartStock" height="120" style="margin-top:20px"></canvas>
</section>

  <footer>
      <div>Creado por: Francisco Andrés Pinto Aravena — <a href="mailto:franciscoandresp@gmail.com">franciscoandresp@gmail.com</a></div>
      <div>Este proyecto es desarrollado con propósitos educacionales, motivando el desarrollo, culturización e innovación tecnológica en las aulas.</div>
      <div>© <span class="year"></span> Queda prohibida la copia, redistribución o adaptación de los contenidos, modelos 3D, imágenes y código aquí publicados sin autorización expresa por escrito.</div>
      <div>© Todos los derechos reservados.</div>
    </footer>
  
    <div id="modalForm" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle">Nuevo ítem</h3>
          <button id="modalClose" class="btn">✖</button>
        </div>
        <div class="modal-body">
          <div class="grid">
            <label>Código <input id="m_codigo"/></label>
            <label>Nombre <input id="m_nombre" required/></label>
            <label>Categoría <input id="m_categoria" list="catList"/></label>
            <label>Unidad <input id="m_unidad" value="UN"/></label>
            <label>Cantidad <input id="m_cantidad" type="number" step="any" value="0"/></label>
            <label>Mínimo <input id="m_minimo" type="number" step="any" placeholder="(opcional)"/></label>
            <label>Ubicación <input id="m_ubicacion"/></label>
            <label>Proveedor <input id="m_proveedor"/></label>
            <label>Valor unitario CLP <input id="m_valor" type="number" step="any" value="0"/></label>
            <label>Estado
              <select id="m_estado">
                <option value="">(auto)</option>
                <option>OK</option>
                <option>BAJO</option>
                <option>AGOTADO</option>
                <option>BAJA</option>
              </select>
            </label>
            <label>Fecha ingreso <input id="m_fecha" type="date"/></label>
            <label>Observaciones <input id="m_obs"/></label>
          </div>
          <datalist id="catList"></datalist>
        </div>
        <div class="modal-footer">
          <button id="modalSave" class="btn btn-ok">Guardar</button>
          <button id="modalCancel" class="btn">Cancelar</button>
        <button id="btnEntrega" class="btn btn-warn">Asignar / Entrega</button>
          </div>
      </div>
    </div>
    
  
    <div id="printable" class="hidden print-area">
      <div class="print-header">
        <h2>Liceo Bicentenario de Excelencia Polivalente San Nicolás</h2>
        <h3>Acta de Entrega de Insumos — Invernadero</h3>
        <div id="printMeta"></div>
      </div>
      <table id="printTable">
        <thead>
          <tr>
            <th>Código</th><th>Nombre</th><th>Categoría</th><th>Unidad</th><th>Cantidad Entregada</th><th>Observaciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div class="print-footer">
        <p>Condiciones y observaciones:</p>
        <p id="printObs"></p>
        <div class="firmas">
          <div>Entregado por: ____________________________</div>
          <div>Recibido por: ____________________________</div>
          <div>Fecha: ____ / ____ / ______</div>
        </div>
      </div>
    </div>
    
  
    <div id="modalEntrega" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Asignar / Entregar insumos</h3>
          <button id="entClose" class="btn">✖</button>
        </div>
        <div class="modal-body">
          <div class="grid">
            <label>Docente / Responsable <input id="e_docente" placeholder="Nombre y apellido"/></label>
            <label>Curso / Proyecto <input id="e_proyecto" placeholder="Ej.: 3° Medio Agro / Hidroponía"/></label>
            <label>Fecha <input id="e_fecha" type="date"/></label>
            <label>Observaciones generales <input id="e_obs" placeholder="Condiciones de préstamo/uso"/></label>
          </div>
          <div style="margin-top:10px">
            <table id="entTable">
              <thead>
                <tr><th>Ítem</th><th>Stock</th><th>A Entregar</th><th>Obs.</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button id="entImprimir" class="btn btn-accent">Generar PDF</button>
          <button id="entConfirm" class="btn btn-ok">Confirmar entrega</button>
          <button id="entCancel" class="btn">Cancelar</button>
        </div>
      </div>
    </div>
    
  </main>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script defer src="js/config.js"></script>
  <script defer src="js/app.js"></script>
</body>
</html>
